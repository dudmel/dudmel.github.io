{"version":3,"file":"cart.component.js","sourceRoot":"","sources":["file:///D:/dev/shop/tmp/broccoli_type_script_compiler-input_base_path-77EpFaED.tmp/0/src/app/shop/cart.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAsE,eAAe,CAAC,CAAA;AACtF,gCAA6C,6BAA6B,CAAC,CAAA;AAC3E,qCAAmC,+BACnC,CAAC,CADiE;AAClE,wCAAsC,iCACtC,CAAC,CADsE;AACvE,6BAA4B,sBAAsB,CAAC,CAAA;AA+CnD;IAIE,uBACU,cAA+B,EAC/B,WAAyB;QADzB,mBAAc,GAAd,cAAc,CAAiB;QAC/B,gBAAW,GAAX,WAAW,CAAc;QAG3B,aAAQ,GAAG,EAAE,CAAC;IAFlB,CAAC;IAIL,gCAAQ,GAAR;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;QACzC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACjC,CAAC;IAED,sCAAc,GAAd,UAAe,SAAS;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IAC7D,CAAC;IAED,oCAAY,GAAZ,UAAa,OAAO,EAAE,MAAM;QAC1B,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;IAC7C,CAAC;IArEH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,MAAM,EAAE,CAAC,mBAAmB,CAAC;YAC7B,UAAU,EAAE,CAAC,yCAAkB,EAAE,+CAAqB,CAAC;YACvD,QAAQ,EAAE,eAAe;YACzB,QAAQ,EAAE,gxCAsCT;SACF,CAAC;;qBAAA;IA0BF,oBAAC;AAAD,CAAC,AAzBD,IAyBC;AAzBY,qBAAa,gBAyBzB,CAAA","sourcesContent":["import { Component, OnInit, ViewChildren, Output, EventEmitter } from '@angular/core';\r\nimport { ProductService, ProductModel } from '../products/product.service';\r\nimport { AdminBtnsComponent } from '../admin/admin-btns.component'\r\nimport { CustomerBtnsComponent } from '../shop/customer-btns.component'\r\nimport { CartService } from '../shop/cart.service';\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  styles: ['img {width: 50px}'],\r\n  directives: [AdminBtnsComponent, CustomerBtnsComponent],\r\n  selector: 'products-list',\r\n  template: `\r\n    <section style=\"margin-top:100px\">\r\n      <h2>Cart</h2>\r\n\r\n      <table class=\"table table-hover\">\r\n        <thead>\r\n                <th></th>\r\n                <th>Product</th>\r\n                <th>Price</th>\r\n                <th>Actions</th>\r\n                <th>Amount</th>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor=\"let product of products\">\r\n                <td> <img [src]=\"product.item.getImgUrl()\">    </td>\r\n                <td> {{product.item.name}}   </td>\r\n                <td> {{product.item.price  | currency:'USD':true}} </td>\r\n                <td> \r\n                  <button class=\"btn btn-danger\"\r\n                    (click) = \"removeFromCart(product.item.id)\">\r\n                    <i class=\"glyphicon glyphicon-trash\"></i>\r\n                  </button>\r\n                  <button class=\"btn btn-primary\"\r\n                    (click) = \"changeAmount(product, 1)\"> +\r\n                  </button>\r\n                  <button class=\"btn btn-primary\"\r\n                    (click) = \"changeAmount(product, -1)\"> -\r\n                  </button>\r\n                </td>\r\n                <td> {{product.amount}} </td>\r\n            </tr>\r\n            <tr> Total: {{total}} </tr>\r\n        </tbody>\r\n    </table>\r\n       \r\n    </section>\r\n\r\n\r\n  `\r\n})\r\nexport class CartComponent implements OnInit {\r\n\r\n  private total;\r\n\r\n  constructor(\r\n    private productService : ProductService,\r\n    private cartService : CartService\r\n  ) { }\r\n\r\n  private products = [];\r\n  \r\n  ngOnInit() {\r\n    this.products = this.cartService.query();\r\n    this.total = this.cartService.checkTotal();\r\n    this.cartService.checkAmount();    \r\n  }\r\n  \r\n  removeFromCart(productId) {\r\n    this.products = this.cartService.removeFromCart(productId);\r\n  }\r\n\r\n  changeAmount(product, change) {\r\n    this.cartService.changeAmount(product, change);\r\n    this.total = this.cartService.checkTotal();\r\n  } \r\n}\r\n"]}